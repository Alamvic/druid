"
Represents a primitive object. A primitive consist of:

- An identifier, currently a `Number` accessed through `primitiveNumber`.
- A generated selector, i.e. the selector of the JITed version of the primitive.
- Its CFG generated by Druid.
"
Class {
	#name : 'DRJITPrimitiveObject',
	#superclass : 'DRInterpreterPrimitiveObject',
	#instVars : [
		'argumentCount',
		'mayCallback'
	],
	#category : 'Druid-CompilerBuilder',
	#package : 'Druid',
	#tag : 'CompilerBuilder'
}

{ #category : 'accessing' }
DRJITPrimitiveObject >> argumentCount [

	^ argumentCount
]

{ #category : 'accessing' }
DRJITPrimitiveObject >> argumentCount: anObject [

	argumentCount := anObject
]

{ #category : 'compiling' }
DRJITPrimitiveObject >> compileUnitUsing: aCompiler [

	DRPrimitiveCompilerCompiler new
		primitiveName: self sourceSelector;
		interpreter: aCompiler newInterpreter;
		primitiveCompilerName: self genSelector;
		configureForCompilerClass: aCompiler targetClass;
		addCompilerOptions: aCompiler compilerOptions;
		compile
]

{ #category : 'initialization' }
DRJITPrimitiveObject >> initialize [

	super initialize.
	mayCallback := false
]

{ #category : 'accessing' }
DRJITPrimitiveObject >> mayCallback [

	^ mayCallback
]

{ #category : 'accessing' }
DRJITPrimitiveObject >> mayCallback: aBoolean [

	mayCallback := aBoolean
]

{ #category : 'accessing' }
DRJITPrimitiveObject >> notSupportedSelector [

	^ #genNonImplementedPrimitive
]
